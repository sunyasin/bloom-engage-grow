TODO Univer



тг рассылки - 30 сообщений/сек, пауза 1 сек между отправками при большом количестве

- восстановить опцию доступа к курсу - по рейтингу или спустя X дней после подписки
- добавить опцию к платным подпискам на сообщество - приватный чат

- отслеживание продления - красная плашка (после логина). 
заплатил ранее - то после оплаты дата экспирации +х дней
не оплатил - если есть Free тариф в сообществе, то переключение на него

В админке добавь раздел выплаты. Скопируй логику отображения таблицы из страницы Финансы. Переключатель месяцев такой же. 
Только запрос по всем сообществам. 
Группируй по авторам (раскрывающиеся строки в таблице с подитогами - сколько выплатить автору за период + кнопка фиксации выплаты с загрузкой квитанции). Первая колонка - имя автор сообщества, вторая - имя сообщества. подписчик, дата оплаты подписки и т.д.
Под таблицей итоги - сколько всего к выплате за период и сколько выплачено.

=====?????
- колонка profiles.payplan - для чего? (у всех 0)
-

-Кнопка для копирования таблицы в буфер в формате csv (tooltip "скопировать для Excel")

 
 
 =======DONE
-В кабинете super_user Добавь кнопку "биллинг". это страница с двумя разделами: 
1) "подписки"
таблица : сообщество-пользователь(имя )-имя tier-дата оплаты, дата экспирации, период     
Переключатель Группировки по сообществу, пользователю и tier (считать сумму оплат)
Фильтр по диапазону дат,  дате экспирации <7 дней 


 - проверить реализованы ли проверки для всех FEATURES (доступ к созвонам)
- приватный чат с любым участником (и автором)


 Партнерская система реализована:

БД: добавлены referral_code, referred_by в profiles + таблица referral_stats + функции generate_referral_code(), get_referral_discount()
UI: новый ReferralBlock компонент в Кабинете с ссылкой и статистикой
Регистрация: реферальный код из URL сохраняется и привязывается к новому пользователю
Платежи: скидка автоматически применяется при оплате портальной подписки, tribute-webhook обновляет статистику рефералов

=======================
Загрузка файлов галереи изменена с Supabase Storage на локальную файловую систему.

Созданные/изменённые файлы:

server/routes/upload.js - Новый API endpoint для загрузки файлов:

POST /api/upload - загрузка одного файла
POST /api/upload-multiple - загрузка нескольких файлов
Файлы сохраняются в public/uploads/{folder}/
Поддержка папок: gallery/thumbnails/ и gallery/{collectionId}/
server/index.js - Добавлена раздача статических файлов из /uploads

vite.config.ts - Добавлен прокси для /uploads и /api

src/components/gallery/CreateCollectionDialog.tsx - Использует локальный API для загрузки thumbnails

src/components/gallery/EditCollectionDialog.tsx - Использует локальный API для загрузки thumbnails

src/components/gallery/AddPhotosDialog.tsx - Использует локальный API для загрузки фотографий

Запуск:

# Установить зависимости
npm install multer

# Запустить бэкенд
npm run dev:backend

# Запустить фронтенд
npm run dev
Файлы будут доступны по URL: http://localhost:3001/uploads/gallery/thumbnails/{filename}